<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title> miPet </title>
            
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
        <meta name="description" content="Document your pet's life with miPet.">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-touch-fullscreen" content="yes">
        <meta name="author" content="">
                
        <link rel="Shortcut Icon" href="/favicon.ico">
        <link rel="icon" href="/favicon.ico" type="image/x-icon">
        <link rel="icon" type="image/ico" href="/favicon.ico"/>
            

        <!-- Styles -->
        <link href="/static/bootstrap/css/bootstrap.css" rel="stylesheet">
        <link href="/static/bootstrap/css/jasny-bootstrap-fileupload.css" rel="stylesheet">

        
        <!--<link href="http://twitter.github.com/bootstrap/assets/css/bootstrap.css" rel="stylesheet">
         <link href="http://twitter.github.com/bootstrap/assets/css/bootstrap-responsive.css" rel="stylesheet">-->
         

        
        <!-- Style written by us for this app, some needed to override bootstrap -->
        <link href="/static/miPet.css" rel="stylesheet">
  



        <!-- ----- Style ----- -->
        <style>
            
          
        </style>
        
        <!-- HTML5 shim, for IE6-8 support of HTML elements--><!--[if lt IE 9]>
        <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
    </head>
    
    <body>
    <!-- Nav bar -->
    <div class="navbar navbar-fixed-top"> <!--navbar-inverse" -->
        <div class="navbar-inner">
            <div class="container">
                
                <!-- calendar button for choosing different date/time
                 - not implemented yet - to jump to diff part of timeline -->
                 <!-- <a class="btn btn-inverse" style="float:right; display: inline;">
                 <i class="icon-calendar icon-white"></i>
                 </a> -->
                
                <!-- dropdown about hackyness is no longer working, so get rid of this icon for now --
                <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                    <i class="icon-info-sign icon-white"></i>
                </a> -->
                <a class="brand" href="/">miPet</a>
                <div class="nav-collapse collapse">
                    <ul class="nav">
                        <li>
                            <a> Document your pet's life with miPet. </a>
                        </li>
                    </ul>
                </div> <!-- END nav-collapse collapse /.nav-collapse -->
                
            </div> <!-- END container-->
        </div> <!-- END navbar-inner -->
    </div> <!-- END navbar navbar-inverse navbar-fixed-top -->
    
    <div class="container">
        
        <form id="modal-form" accept-charset="UTF-8" action="/tagging" data-remote="true" method="post">
        <div id="add-profile" class="modal hide fade in" style="display:none;" aria-hidden="false">
            
            <div class="modal-header">
                <a class="close" data-dismiss="modal">Ã—</a>
                <h3>Create a miPet Profile</h3>
            </div> <!-- end modal-header -->
            
            <div class="modal-body">
                
                
                <!-- ----- Pet NAME ----- -->
                <div id="nameInput" class="inputField">
                    Pet Name:
                    <input type="text" id="input-petName" placeholder="Pet's name">
                        </div>
                
                
                <!-- ----- Pet BIO ----- -->
                <div id="bioInput" class="inputField">
                    Description:
                    <input type="text" id="input-petBio" placeholder="Provide a brief bio of your awesome pet :)">
                        </div>
                
                
                <!-- ----- Pet PROFILE PICTURE ----- -->
                <div id="profPicInput">
                   
                        <div id="profPicInputChoice" style="padding-bottom: 5px;">
                        
                    <form id="profPicChoice">
                        <span class="inputLabel"> </span>
                        <span class="inputField">
                        <input type="radio" name="profPicChoose" id="imageUpload"value="upload" onclick="chooseMedia(this.value)" checked=true> Upload </input>
                        </span>
                        &nbsp; 
                        <span class="inputField">
                        <input type="radio" name="profPicChoose" id="imageURL" value="url" onclick="chooseMedia(this.value)"> From URL </input>
                        </span>
                    </form>
                        
                        </div> <!-- end mediaInputChoice -->

                        
                    <div id="profPicURLInput" class="inputField">
                        <span class="inputLabel">
                            Profile Picture URL:
                        </span>
                        <input type="url" id="input-media-url" name="media" placeholder="http://...yourimagelink.png" />
                    </div>
                    
                    <div id="profPicUploadInput" class="inputField">
                        <span class="inputLabel">
                            Upload Profile Picture:
                        </span>
                        <input type="file" id="input-media-upload" name="media"/>
                    </div>
                        
                </div> <!-- end mediaInput -->
                
                
                <!-- ----- JOIN DATE will default to current date/time ----- -->
                <div id="birthdateInput" class="inputField">
                    Approx Pet Birthdate:
                    <input type="date" id="input-petBirthdate" placeholder="YYYY-MM-DD">
                </div>
                
                
            </div> <!-- end modal-body -->
            
            
            <div class="modal-footer">
                <a class="btn" data-dismiss="modal">Cancel</a> <!-- Close --> <!-- href="#"  -->
                <a id="modal-form-submit" class="btn btn-primary" onclick="addPetProfile()" data-dismiss="modal">Submit</a> <!-- href="#"  -->
                <!-- added data-dismiss to hide after click submit, doesn't clear the fields though-->
                
            </div> <!-- end modal-footer -->
            
            
        </div> <!-- end add-event modal -->
        </form>

        <p>
        <a id="btn-add-profile" data-toggle="modal" href="#add-profile" class="btn btn-primary"> <!--style="margin: auto auto;"-->
            <big>+</big> Add a miPet profile
        </a>
        </p>
        
        
        
        
    	<div id="pet-info"></div>
        
        
    	<div id="events">
        <!-- load ?? 
         for event in eventList
         create the html for hte listing 
         create the html for the modal edit event box with values filled in
         -->
        
        </div>    
    </div> <!-- end container -->



    <div id="user_container"></div>
    
    
    <!-- Javascript
     ================================================== -->

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="http://twitter.github.com/bootstrap/assets/js/bootstrap-modal.js"></script>
    <script src="http://twitter.github.com/bootstrap/assets/js/bootstrap-alert.js"></script>
    <script src="http://twitter.github.com/bootstrap/assets/js/bootstrap-transition.js"> </script>
    <script src="http://twitter.github.com/bootstrap/assets/js/jquery.js"> </script>
    <!--<script src="http://twitter.github.com/bootstrap/assets/js/bootstrap-popover.js"> </script>-->
    <script src="http://twitter.github.com/bootstrap/assets/js/bootstrap-button.js"> </script>
    <script src="http://twitter.github.com/bootstrap/assets/js/jquery.js"> </script>
    <script src="http://underscorejs.org/underscore-min.js"> </script>
    <script src="http://backbonejs.org/backbone-min.js"> </script>
    <script src="/static/bootstrap/js/bootstrap-fileupload.js"> </script>
    <script type="text/javascript" src="/static/js/models.js"> </script>
    <script type="text/javascript" src="/static/js/views.js"> </script>


    <script type="text/html" id="user_template">
        <div>
            <span><%= name %><span>
            <span><%= bio %><span>
            <span><%= prof_pic %><span>
            <strong>Hello</strong>
        </div>
    </script>
    
    <script type="text/javascript">
        var user = new User({id: {{user_id}} });
        user.fetch({
            success: function (data) {
                // Note that we could also 'recycle' the same instance of EmployeeFullView
                // instead of creating new instances

                //var petView = new PetView({model: data});
                var user_view = new UserView({model: data, el:$("#user_container")});
            }
        });
    </script>
    
    <script>
        //$('#input-media-upload').hide();
        $('#mediaURLInput').hide();
        $('#edit-mediaURLInput').hide();
         
        function chooseMedia(choice)
        {
            /* if ($('#imageUpload').checked) { }*/
            
            if (choice == "url")
            {
                $('#mediaURLInput').show();
                $('#mediaUploadInput').hide();
                
                $('#edit-mediaURLInput').show();
                $('#edit-mediaUploadInput').hide();
            }
            else // choice == "upload"
            {
                $('#mediaUploadInput').show();
                $('#mediaURLInput').hide();
                
                $('#edit-mediaUploadInput').show();
                $('#edit-mediaURLInput').hide();
            }
         } 
	</script>
    

    <script>
        
        /* 
         from https://hacks.mozilla.org/2011/03/the-shortest-image-uploader-ever/ 
         */
        function upload(file) {
            
            // file is from a <input> tag or from Drag'n Drop
            // Is the file an image?
            
            if (!file || !file.type.match(/image.*/)) return;
            
            // It is!
            // Let's build a FormData object
            
            var fd = new FormData();
            fd.append("image", file); // Append the file
            
            // Get your own key: http://api.imgur.com/
            fd.append("key", "628a7999f0bef3448b20e9a665a69ed8");
            
            
            // Create the XHR (Cross-Domain XHR FTW!!!)
            var xhr = new XMLHttpRequest();
            xhr.open("POST", "http://api.imgur.com/2/upload.json"); // Boooom!
            xhr.onload = function() {
                // Big win!
                // The URL of the image is:
                JSON.parse(xhr.responseText).upload.links.imgur_page;
            }
            // Ok, I don't handle the errors. An exercice for the reader.
            // And now, we send the formdata
            xhr.send(fd);
        }
        
    </script>

    
    
    <!-- put this style sheet AFTER personalized ones - otherwise weird header formatting padding -->
    <link href="/static/bootstrap/css/bootstrap-responsive.css" rel="stylesheet">
    
    <!-- 
     <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js" type="text/javascript"></script>
     <script src="http://maps.google.com/maps/api/js?sensor=false\" type=\"text/javascript\"></script> -->
  
	
     <script src="/static/bootstrap/js/jquery.js"></script>
        
    <!-- Scripts written by us for this app, not from/for boostrap -->
    <script src="/static/miPet.js"></script>

    <script src="/static/js/moment.min.js"> </script>
        
          <!--
     <script src="/static/bootstrap/js/bootstrap-transition.js"></script>
     <script src="/static/bootstrap/js/bootstrap-alert.js"></script>
     <script src="/static/bootstrap/js/bootstrap-modal.js"></script>
     <script src="/static/bootstrap/js/bootstrap-dropdown.js"></script>
     <script src="/static/bootstrap/js/bootstrap-scrollspy.js"></script>
     <script src="/static/bootstrap/js/bootstrap-tab.js"></script>
     <script src="/static/bootstrap/js/bootstrap-tooltip.js"></script>
     <script src="/static/bootstrap/js/bootstrap-popover.js"></script>
     <script src="/static/bootstrap/js/bootstrap-button.js"></script>
     <script src="/static/bootstrap/js/bootstrap-collapse.js"></script>
     <script src="/static/bootstrap/js/bootstrap-carousel.js"></script>
     <script src="/static/bootstrap/js/bootstrap-typeahead.js"></script>
     -->
    
    </body>
</html>