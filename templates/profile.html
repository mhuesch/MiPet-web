<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title> miPet </title>
            
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
<meta name="description" content="Document your pet's life with miPet.">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-touch-fullscreen" content="yes">
<meta name="author" content="">
        
<link rel="Shortcut Icon" href="/favicon.ico">
<link rel="icon" href="/favicon.ico" type="image/x-icon">
<link rel="icon" type="image/ico" href="/favicon.ico"/>
    

    <!-- Styles -->
    <link href="/static/bootstrap/css/bootstrap.css" rel="stylesheet">
    <link href="/static/bootstrap/css/jasny-bootstrap-fileupload.css" rel="stylesheet">

    
    <!--<link href="http://twitter.github.com/bootstrap/assets/css/bootstrap.css" rel="stylesheet">
     <link href="http://twitter.github.com/bootstrap/assets/css/bootstrap-responsive.css" rel="stylesheet">-->
     

    
    <!-- Style written by us for this app, some needed to override bootstrap -->
    <link href="/static/miPet.css" rel="stylesheet">
  



<!-- ----- Style ----- -->
        <style>
            
          
            </style>
        
    <!-- HTML5 shim, for IE6-8 support of HTML elements--><!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
</head>
    
<body>
    <!-- Nav bar -->
    <div class="navbar navbar-fixed-top"> <!--navbar-inverse" -->
        <div class="navbar-inner">
            <div class="container">
                
                <!-- calendar button for choosing different date/time
                 - not implemented yet - to jump to diff part of timeline -->
                 <!-- <a class="btn btn-inverse" style="float:right; display: inline;">
                 <i class="icon-calendar icon-white"></i>
                 </a> -->
                
                <!-- dropdown about hackyness is no longer working, so get rid of this icon for now --
                <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                    <i class="icon-info-sign icon-white"></i>
                </a> -->
                <a class="brand" href="/">miPet</a>
                <div class="nav-collapse collapse">
                    <ul class="nav">
                        <li>
                            <a> Document your pet's life with miPet. </a>
                        </li>
                    </ul>
                </div> <!-- END nav-collapse collapse /.nav-collapse -->
                
            </div> <!-- END container-->
        </div> <!-- END navbar-inner -->
    </div> <!-- END navbar navbar-inverse navbar-fixed-top -->
    
    <div class="container">
        

        
        <!-- ----- START Add Event modal dialog box ----- -->
        <form id="modal-form" accept-charset="UTF-8"
            data-remote="true" method="post"> <!-- action="/tagging" -->
        <div id="add-event" class="modal hide fade in" style="display:none;">
            
            <div class="modal-header">
                <a class="close" data-dismiss="modal">×</a>
                <h3>Add an Event</h3>
            </div> <!-- end modal-header -->
            
            
            
                <div class="modal-body">
                    
                    
                    
                    <!-- --- TITLE --- -->
                    <div id="titleInput" class="inputField">
                        <span class="inputLabel">
                            Event Title:
                        </span>
                        <input type="text" id="input-title" placeholder="Title of Event" />
                    </div>
                    
                    
                    <!-- --- TEXT/description --- -->
                    <div id="textInput" class="inputField">
                        <span class="inputLabel">
                            Description:
                        </span>
                        <input type="text" id="input-text" name="text" placeholder="Describe this epic event in your pet's life!" />
                    </div>
                    
                    <!-- --- DATE (defaults to current) --- -->
                    <div id="dateInput" class="inputField">
                        <span class="inputLabel">
                            Date:
                        </span>
                        <input type="date" id="input-date" placeholder="YYYY-MM-DD"/>
                    </div>
                    
                    <!-- --- MILESTONE --- -->
                    <div id="milestoneInput" class="inputField">
                        <span class="inputLabel">
                            Milestone:
                        </span>
                        <input type="text" id="input-milestone" name="text" placeholder="" />
                    </div>

                    
                    <!-- --- MEDIA - UPLOAD/URL -->
                    
                    <!--
                     <div class="btn-group">
                     <a class="btn">1</a>
                     <a class="btn">2</a>
                     </div>
                     -->
                    
                    <div id="mediaInput">
                   
                        <div id="mediaInputChoice" style="padding-bottom: 5px;">
                        
                    <form id="imageChoice">
                        <span class="inputLabel"> </span>
                        <span class="inputField">
                        <input type="radio" name="mediaChoose" id="imageUpload"value="upload" onclick="chooseMedia(this.value)" checked=true> Upload </input>
                        </span>
                        &nbsp; 
                        <span class="inputField">
                        <input type="radio" name="mediaChoose" id="imageURL" value="url" onclick="chooseMedia(this.value)"> From URL </input>
                        </span>
                    </form>
                        
                        </div> <!-- end mediaInputChoice -->

                        
                    <div id="mediaURLInput" class="inputField">
                        <span class="inputLabel">
                            Image URL:
                        </span>
                        <input type="url" id="input-media-url" name="media" placeholder="http://...yourimagelink.png" />
                    </div>
					
					<div id="mediaUploadInput" class="inputField">
                        <span class="inputLabel">
                            Upload image:
                        </span>
                        <input type="file" id="input-media-upload" name="media"/>
                    </div>
                        
                    </div> <!-- end mediaInput -->

                    
                    

                     <!-- prettiness from http://jasny.github.com/bootstrap/javascript.html#fileupload -->
                    <!--
                    <div class="fileupload fileupload-new" data-provides="fileupload">
                        <div class="fileupload-new thumbnail" style="width: 200px; height: 150px;"><img src="http://www.placehold.it/200x150/EFEFEF/AAAAAA&text=no+image" /></div>
                        <div class="fileupload-preview fileupload-exists thumbnail" style="max-width: 200px; max-height: 150px; line-height: 20px;"></div>
                        <div>
                            <span class="btn btn-file"><span class="fileupload-new">Select image</span><span class="fileupload-exists">Change</span><input type="file" /></span>
                            <a href="#" class="btn fileupload-exists" data-dismiss="fileupload">Remove</a>
                        </div>
                    </div>
                    
                    <div class="fileupload fileupload-new" data-provides="fileupload">
                        <span class="btn btn-file"><span class="fileupload-new">Select file</span><span class="fileupload-exists">Change</span><input type="file" /></span>
                        <span class="fileupload-preview"></span>
                        <a href="#" class="close fileupload-exists" data-dismiss="fileupload" style="float: none">×</a>
                    </div>
                     -->

                    
                    <!-- ----- More inputs accordion -- isn't quite working....
                     <a class="btn accordion-toggle" data-toggle="collapse"
                     href="#moreInputs"> More inputs... </a>
                     
                     <div id="moreInputs" class="collapse"> <!-- class="accordion-body collapse in"-->
                    
                <!--
                <input type="checkbox" id="input-seeMore" name="" value="" onclick="seeMore(this.checked)"> See more options [optional] </input>

                    <div id="moreInputs">
                        
                        <!-- --- DATE (defaults to current) --- -->

                    <!-- --- Location (opt) --- --
                    <div id="locationInput" class="inputField">
                        Location:
                        <input type="text" id="input-location" name="location" placeholder="Where did this event happen? (optional) e.g. Neighborhood Park" />
                    </div> -->
                       
                   <!-- </div> <!--  end moreInputs div ---------- -->

                    
                </div> <!-- end modal-body -->
                
        
                
                <div class="modal-footer">
                    <a class="btn" data-dismiss="modal">Cancel</a> <!-- Close --> <!-- href="#"  -->
                    <a id="modal-form-submit" class='btn btn-primary' onclick="addEvent({{pet_id}})" data-dismiss="modal">Submit</a> <!-- href="#"  -->
                    <!-- added data-dismiss to hide after click submit, doesn't clear the fields though-->
                    
                </div> <!-- end modal-footer -->
            
                
        </div> <!-- end add-event modal --> 
        </form>
        
        <p>
        <a id="btn-add-event" data-toggle="modal" href="#add-event" class="btn btn-primary" style="float: right;">
            <big>+</big> Add Event
        </a>
        </p>
        <!-- ----- END Add Event modal dialog box ----- -->
        

        
        
        
        <!-- ---------- START EDIT Event modal dialog box ---------- -->
        <form id="modal-form" accept-charset="UTF-8" data-remote="true"
            method="post"> <!-- action="/tagging" -->
            <div id="edit-event" class="modal hide fade in" style="display:none;">
                
                <div class="modal-header">
                    <a class="close" data-dismiss="modal">×</a>
                    <h3>Edit Event</h3>
                    
                </div> <!-- end modal-header -->
                
                <div class="modal-body">
                    
                    <!-- --- TITLE --- -->
                    <div id="titleInput" class="inputField">
                        <span class="inputLabel">
                            Event Title:
                        </span>
                        <input type="text" id="edit-input-title" placeholder="Title of Event" />
                    </div>
                    
                    
                    <!-- --- TEXT/description --- -->
                    <div id="textInput" class="inputField">
                        <span class="inputLabel">
                            Description:
                        </span>
                        <input type="text" id="edit-input-text" name="text" placeholder="Describe this epic event in your pet's life!" />
                    </div>
                    
                    <!-- --- DATE (defaults to current) --- -->
                    <div id="dateInput" class="inputField">
                        <span class="inputLabel">
                            Date:
                        </span>
                        <input type="date" id="edit-input-date" placeholder="YYYY-MM-DD"/>
                    </div>
                    
                    
                    
                    <!-- --- MILESTONE --- -->
                    <div id="milestoneInput" class="inputField">
                        <span class="inputLabel">
                            Milestone:
                        </span>
                        <input type="text" id="edit-input-milestone" name="text" placeholder="" />
                    </div>
                    
                    
                    
                    <!-- --- MEDIA - UPLOAD/URL -->
                    <div id="mediaInput">
                        
                        <div id="mediaInputChoice" style="padding-bottom: 5px;">
                            
                            <form id="imageChoice">
                                <span class="inputLabel"> </span>
                                <span class="inputField">
                                    <input type="radio" name="mediaChoose" id="imageUpload"value="upload" onclick="chooseMedia(this.value)"> Upload </input>
                                </span>
                                &nbsp;
                                <span class="inputField">
                                    <input type="radio" name="mediaChoose" id="imageURL" value="url" onclick="chooseMedia(this.value)" checked=true> From URL </input>
                                </span>
                            </form>
                            
                        </div> <!-- end mediaInputChoice -->
                        
                        
                        <div id="edit-mediaURLInput" class="inputField">
                            <span class="inputLabel">
                                Image URL:
                            </span>
                            <input type="url" id="edit-input-media-url" name="media" placeholder="http://...yourimagelink.png" />
                        </div>
                        
                        <div id="edit-mediaUploadInput" class="inputField">
                            <span class="inputLabel">
                                Upload image:
                            </span>
                            <input type="file" id="edit-input-media-upload" name="media"/>
                        </div>
                        
						
                    </div> <!-- end mediaInput -->
					
					<input type="hidden" name="event-id" id="edit-event-id"/>
					<!--
                    <br/>
                    <div class="deleteEvent">
                    <a class='btn btn-danger btn-mini' onclick="deleteEvent()"> <big> x </big> </a> Delete this event
                    </div>
                -->
                    
                </div> <!-- end modal-body -->
                
                
                <div class="modal-footer">
                    <a class='btn btn-danger' onclick="deleteEvent()" style="float: left;"> Delete event </a>
                    <a class="btn" data-dismiss="modal">Cancel</a> <!-- Close --> <!-- href="#"  -->
                    <a id="modal-form-submit" class='btn btn-primary' onclick="editEvent({{pet_id}})" data-dismiss="modal">Submit</a> <!-- href="#"  -->
                    <!-- added data-dismiss to hide after click submit, doesn't clear the fields though-->
                    
                </div> <!-- end modal-footer -->
                
            </div> <!-- end edit-event modal --> 
        </form>
        <!-- ---------- END EDIT Event modal dialog box ---------- -->
        
        <!--
        <p>
        <a id="btn-edit-event" data-toggle="modal" href="#edit-event" class="btn" style="float: right;">
            Edit Event 
        </a>
        </p>
         -->
        
        




         <!-- ---------- START Profile info modal dialog box ---------- -->
        <form id="modal-form" accept-charset="UTF-8" data-remote="true"
            method="post"> <!-- action="/tagging" -->
            <div id="edit-profileInfo" class="modal hide fade in" style="display:none;">
                
                <div class="modal-header">
                    <a class="close" data-dismiss="modal">×</a>
                    <h3>Profile Information</h3>
                    
                </div> <!-- end modal-header -->
                
                <div class="modal-body">
                    
                    <!-- --- NAME --- -->
                    <div id="nameInput" class="inputField">
                        <span class="inputLabel">
                            Pet's Name:
                        </span>
                        <input type="text" id="prof-input-name" placeholder="Name of Pet" />
                    </div>


                    <!-- --- OWNER --- --
                    <div id="ownerInput" class="inputField">
                        <span class="inputLabel">
                            Owner:
                        </span>
                        <input type="text" id="prof-input-owner" placeholder="Name of Owner" />
                    </div> -->


                    <!-- --- BIO --- -->
                    <div id="bioInput" class="inputField">
                        <span class="inputLabel">
                            Pet's Bio:
                        </span>
                        <input type="text" id="prof-input-bio" placeholder="Provide a brief bio of your awesome pet!" />
                    </div>


                    <!-- --- BIRTHDATE --- --> <!-- --- DATE (defaults to current) --- -->
                    <div id="birthdateInput" class="inputField">
                        <span class="inputLabel">
                            Approx. Pet Birthdate:
                        </span>
                        <input type="date" id="prof-input-birthdate" placeholder="YYYY-MM-DD"/>
                    </div>


                    <!-- --- PROFILE PICTURE --- -->

                    
                    <!-- --- MEDIA - UPLOAD/URL -->
                    <div id="mediaInput">
                        
                        <div id="mediaInputChoice" style="padding-bottom: 5px;">
                            
                            <form id="imageChoice">
                                <span class="inputLabel"> </span>
                                <span class="inputField">
                                    <input type="radio" name="mediaChoose" id="imageUpload"value="upload" onclick="chooseMedia(this.value)"> Upload </input>
                                </span>
                                &nbsp;
                                <span class="inputField">
                                    <input type="radio" name="mediaChoose" id="imageURL" value="url" onclick="chooseMedia(this.value)" checked=true> From URL </input>
                                </span>
                            </form>
                            
                        </div> <!-- end mediaInputChoice -->
                        
                        
                        <div id="prof-mediaURLInput" class="inputField">
                            <span class="inputLabel">
                                Image URL:
                            </span>
                            <input type="url" id="prof-input-media-url" name="media" placeholder="http://...yourimagelink.png" />
                        </div>
                        
                        <div id="prof-mediaUploadInput" class="inputField">
                            <span class="inputLabel">
                                Upload image:
                            </span>
                            <input type="file" id="prof-input-media-upload" name="media"/>
                        </div>
                        
                    </div> <!-- end mediaInput -->
                
                <!--
                    <br/>
                    <div class="deletePetProfile">
                    <a class='btn btn-danger btn-mini' onclick="deleteEvent({{pet_id}})"> <big> x </big> </a> Delete this pet's profile
                    </div>
                -->
                    
                </div> <!-- end modal-body -->
                
                
                <div class="modal-footer">
                    <!--a class='btn btn-danger' onclick="deleteEvent()" style="float: left;"> Delete event </a-->
                    <a class="btn" data-dismiss="modal">Cancel</a> <!-- Close --> <!-- href="#"  -->
                    <a id="modal-form-submit" class='btn btn-primary' onclick="editProfile()" data-dismiss="modal">Submit</a> <!-- href="#"  -->
                    <!-- added data-dismiss to hide after click submit, doesn't clear the fields though-->
                    
                </div> <!-- end modal-footer -->
                
            </div> <!-- end edit-event modal --> 
        </form>
        <!-- ---------- END Profile Info modal dialog box ---------- -->
        
        
        
    	<div id="pet-info">


        </div>
        
        
    	<div id="events">
        <!-- load ?? 
         for event in eventList
         create the html for hte listing 
         create the html for the modal edit event box with values filled in
         -->
         
        
            
        
        
        </div>
        
        
    </div> <!-- end container -->

    
    
    
    <!-- Javascript
     ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="http://twitter.github.com/bootstrap/assets/js/bootstrap-modal.js"></script>
    <script src="http://twitter.github.com/bootstrap/assets/js/bootstrap-alert.js"></script>
    <script src="http://twitter.github.com/bootstrap/assets/js/bootstrap-transition.js"> </script>
    <script src="http://twitter.github.com/bootstrap/assets/js/jquery.js"> </script>
    <!--<script src="http://twitter.github.com/bootstrap/assets/js/bootstrap-popover.js"> </script>-->
    <script src="http://twitter.github.com/bootstrap/assets/js/bootstrap-button.js"> </script>
    <script src="http://twitter.github.com/bootstrap/assets/js/jquery.js"> </script>
    <script src="http://underscorejs.org/underscore-min.js"> </script>
    <script src="http://backbonejs.org/backbone-min.js"> </script>
    
    <script src="/static/bootstrap/js/bootstrap-fileupload.js"> </script>
    
    
    <script type="text/javascript" src="/static/js/models.js"> </script>
    <script type="text/javascript" src="/static/js/views.js"> </script>

    
    <script type="text/javascript">
        var pet = new Pet({id: {{pet_id}} });
        pet.fetch({
            success: function (data) {
                // Note that we could also 'recycle' the same instance of EmployeeFullView
                // instead of creating new instances
                var petView = new PetView({model: data});
				
            }
        });
		var petEvents = new EventCollection();
		petEvents.url = '/api/v1/pet/' + {{pet_id}} + '/events/';
		var eventListView;
		petEvents.fetch({
            success:function (data) {
                if (data.length == 0)
                	$('#eventlist').html("<li>no events</li>");
                    //no data $('.no-reports').show();
                eventListView = new EventListView({model: data});
            }
        });
    </script>
    
    <script>
        function openEditEvent(eventID)
        {   
            var title = "eventTitle-"+eventID;
            var desc = "eventDesc-"+eventID;
            var date = "eventDateTime-"+eventID;

           /* var outputString = ""; 
        //    outputString += "edit-input-title: " + document.getElementById("edit-input-title").value + "\n";
        //    outputString += "edit-input-text: " + document.getElementById("edit-input-text").value+ "\n";
        //    outputString += "edit-input-date: " + document.getElementById("edit-input-date").value + "\n";

            outputString += "title: " + title + "\n";
            outputString += "desc: " + desc + "\n";
            outputString += "date: " + date + "\n";

            //outputString += "eventTitle: " + document.getElementById(title).value + "\n";
            //outputString += "eventDesc: " + document.getElementById(desc).value + "\n";
            //outputString += "eventDateTime: " + document.getElementById(moment).value + "\n";

           // alert(outputString);
            */
            document.getElementById("edit-input-title").value = document.getElementById(title).innerHTML; 
            document.getElementById("edit-input-text").value = document.getElementById(desc).innerHTML;

            var date_field = document.getElementById(date).innerHTML;
            document.getElementById("edit-input-date").value = moment(date_field).format("YYYY-MM-DD");

        	document.getElementById("edit-event-id").value =  eventID;
          //  edit-input-media-url
          //  edit-input-media-upload*/
        }


        function openEditProfileInfo(petID)
        {
            // alert('open edit prof info with petid: ' + petID);
            document.getElementById("prof-input-name").value = document.getElementById('petName').innerHTML; 
            document.getElementById("prof-input-bio").value = document.getElementById('petBio').innerHTML;
            document.getElementById("prof-input-media-url").value =  document.getElementById('petProfilePic').src; 
        }
    </script>
    
    <script>
        //$('#input-media-upload').hide();
        $('#mediaURLInput').hide();

        // show the urls by default when editing info
        $('#edit-mediaUploadInput').hide();
        $('#prof-mediaUploadInput').hide();
         
        function chooseMedia(choice)
        {
            /* if ($('#imageUpload').checked) { }*/
            
            if (choice == "url")
            {
                $('#mediaURLInput').show();
                $('#mediaUploadInput').hide();
                
                $('#edit-mediaURLInput').show();
                $('#edit-mediaUploadInput').hide();

                $('#prof-mediaURLInput').show();
                $('#prof-mediaUploadInput').hide();
            }
            else // choice == "upload"
            {
                $('#mediaUploadInput').show();
                $('#mediaURLInput').hide();
                
                $('#edit-mediaUploadInput').show();
                $('#edit-mediaURLInput').hide();

                $('#prof-mediaUploadInput').show();
                $('#prof-mediaURLInput').hide();
            }
         } 
	</script>

    <script>
		function deleteEvent(eventID){
			var eventID = document.getElementById("edit-event-id").value;
			/*
			console.log(eventID);
			var tempEvent = petEvents.get(eventID);
			petEvents.remove(tempEvent);
			*/
			var tempEvent = new Event({pk:eventID});
			console.log(tempEvent);
			tempEvent.destroy({
				success: function(model, response) {
					window.location.reload();
				},
				error: function(model){
					
				}
			});
			//console.log(tempEvent);
			//tempEvent.destroy();
			//petEvents.remove(tempEvent);
			
		}
	
	</script>
    
    <!-- put this style sheet AFTER personalized ones - otherwise weird header formatting padding -->
    <link href="/static/bootstrap/css/bootstrap-responsive.css" rel="stylesheet">
    
    <!-- 
     <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js" type="text/javascript"></script>
     <script src="http://maps.google.com/maps/api/js?sensor=false\" type=\"text/javascript\"></script> -->
  
	
     <script src="/static/bootstrap/js/jquery.js"></script>
        
    <!-- Scripts written by us for this app, not from/for boostrap -->
    <script src="/static/miPet.js"></script>

    <script src="/static/js/moment.min.js"> </script>
        
          <!--
     <script src="/static/bootstrap/js/bootstrap-transition.js"></script>
     <script src="/static/bootstrap/js/bootstrap-alert.js"></script>
     <script src="/static/bootstrap/js/bootstrap-modal.js"></script>
     <script src="/static/bootstrap/js/bootstrap-dropdown.js"></script>
     <script src="/static/bootstrap/js/bootstrap-scrollspy.js"></script>
     <script src="/static/bootstrap/js/bootstrap-tab.js"></script>
     <script src="/static/bootstrap/js/bootstrap-tooltip.js"></script>
     <script src="/static/bootstrap/js/bootstrap-popover.js"></script>
     <script src="/static/bootstrap/js/bootstrap-button.js"></script>
     <script src="/static/bootstrap/js/bootstrap-collapse.js"></script>
     <script src="/static/bootstrap/js/bootstrap-carousel.js"></script>
     <script src="/static/bootstrap/js/bootstrap-typeahead.js"></script>
     -->
    
</body>
</html>